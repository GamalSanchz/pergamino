<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pergamino Encantado</title>
  <style>
    :root {
      color-scheme: only light;
      --paper-base: #f2e0bb;
      --paper-mid: #ebd1a0;
      --paper-edge: #d8b57c;
      --ink: #26160e;
      --seal-dark: #7a1114;
      --seal-light: #ffb4b0;
      --seal-mid: #ba1b1d;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #faf7f1 0%, #e7dcc8 45%, #d1bda1 100%);
      font-family: 'Playfair Display', 'Times New Roman', serif;
      color: var(--ink);
    }

    .wrapper {
      width: min(92vw, 720px);
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 32px 12px;
      transition: opacity 0.6s ease;
    }

    .scroll {
      position: relative;
      width: 100%;
      background: linear-gradient(180deg, var(--paper-base) 0%, var(--paper-mid) 50%, var(--paper-base) 100%);
      box-shadow: 0 28px 45px rgba(38, 22, 14, 0.25), 0 4px 16px rgba(0, 0, 0, 0.2);
      padding: 110px 64px;
      border-radius: 24px;
      overflow: hidden;
      max-height: 240px;
      transition: max-height 1.1s ease, padding 1.1s ease;
      isolation: isolate;
    }

    .scroll::before,
    .scroll::after {
      content: "";
      position: absolute;
      left: 0;
      width: 100%;
      height: 32px;
      background: radial-gradient(circle at 16px 16px, rgba(0, 0, 0, 0.16) 0 15px, transparent 16px) repeat-x;
      background-size: 32px 32px;
      pointer-events: none;
      opacity: 0.4;
    }

    .scroll::before {
      top: -16px;
    }

    .scroll::after {
      bottom: -16px;
      transform: scaleY(-1);
    }

    .scroll-edge {
      position: absolute;
      left: 50%;
      width: 110%;
      height: 54px;
      background: linear-gradient(90deg, #8c6337 0%, #d9ae76 38%, #f4c788 50%, #d9ae76 62%, #8c6337 100%);
      border-radius: 999px;
      box-shadow: 0 12px 18px rgba(70, 40, 10, 0.35);
      transform: translateX(-50%);
      z-index: -1;
    }

    .scroll-edge::after {
      content: "";
      position: absolute;
      inset: 6px 12px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.45), rgba(120, 70, 30, 0.25));
      opacity: 0.6;
    }

    .scroll-edge.top {
      top: -70px;
    }

    .scroll-edge.bottom {
      bottom: -70px;
    }

    .scroll.opened {
      max-height: 1200px;
      padding: 140px 64px 160px;
    }

    .seal {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(1);
      width: 130px;
      height: 130px;
      border-radius: 50%;
      background: radial-gradient(circle at 32% 28%, var(--seal-light) 0%, var(--seal-mid) 45%, var(--seal-dark) 100%);
      border: none;
      box-shadow: inset -8px -14px 16px rgba(0, 0, 0, 0.35), inset 8px 8px 16px rgba(255, 255, 255, 0.18), 0 18px 25px rgba(0, 0, 0, 0.35);
      color: rgba(255, 255, 255, 0.92);
      font-size: 42px;
      letter-spacing: 2px;
      text-shadow: 0 2px 2px rgba(0, 0, 0, 0.4);
      cursor: pointer;
      transition: transform 0.9s ease, opacity 0.6s ease;
      z-index: 3;
    }

    .seal::before {
      content: "";
      position: absolute;
      inset: 20% 25% 55% 25%;
      border-radius: 50%;
      background: radial-gradient(circle at 40% 35%, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
      opacity: 0.8;
    }

    .seal::after {
      content: "";
      position: absolute;
      left: 50%;
      bottom: -46px;
      transform: translateX(-50%);
      width: 110px;
      height: 60px;
      background: radial-gradient(ellipse at center, #c42027 0%, #a11118 80%);
      border-radius: 0 0 45% 45%;
      box-shadow: 0 12px 16px rgba(0, 0, 0, 0.35);
      clip-path: polygon(0 0, 50% 40%, 100% 0, 86% 100%, 50% 74%, 14% 100%);
    }

    .scroll.opened .seal {
      transform: translate(-50%, -50%) scale(0.1);
      opacity: 0;
      pointer-events: none;
    }

    .letter {
      position: relative;
      opacity: 0;
      transform: translateY(24px);
      transition: opacity 0.8s ease 0.25s, transform 0.8s ease 0.25s;
      max-height: 0;
      overflow: hidden;
      pointer-events: none;
      font-size: clamp(1.02rem, 1.4vw + 0.6rem, 1.12rem);
      line-height: 1.6;
      text-align: justify;
    }

    .scroll.opened .letter {
      opacity: 1;
      transform: translateY(0);
      max-height: 1000px;
      pointer-events: auto;
    }

    .letter strong {
      font-weight: 600;
    }

    .close-letter {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-top: 32px;
      margin-left: auto;
      border: none;
      background: linear-gradient(145deg, #b54b1e, #7a2a08);
      color: #fff;
      font-size: 1.1rem;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 8px 14px rgba(0, 0, 0, 0.25);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .close-letter:active {
      transform: scale(0.95);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.35);
    }

    .burn-overlay {
      position: absolute;
      inset: 0;
      pointer-events: none;
      opacity: 0;
      z-index: 5;
    }

    .burn-overlay::before,
    .burn-overlay::after {
      content: "";
      position: absolute;
      inset: 0;
      opacity: 0;
    }

    .burn-overlay::before {
      --size: 80px;
      width: var(--size);
      height: var(--size);
      left: var(--burn-x, 50%);
      top: var(--burn-y, 50%);
      transform: translate(-50%, -50%) scale(0.05);
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255, 216, 128, 0.95) 0%, rgba(240, 118, 32, 0.95) 30%, rgba(120, 42, 10, 0.95) 55%, rgba(0, 0, 0, 0.98) 100%);
      box-shadow: 0 0 25px rgba(255, 180, 80, 0.9), 0 0 60px rgba(255, 120, 0, 0.6);
      filter: blur(0.8px);
    }

    .burn-overlay::after {
      background: radial-gradient(circle at 50% 20%, rgba(255, 255, 255, 0.45), transparent 60%);
      mix-blend-mode: screen;
      transform: translateY(-20%);
    }

    .scroll.burning .letter {
      animation: emberFade 2s forwards;
    }

    .scroll.burning .burn-overlay {
      animation: burnDarken 2.5s forwards;
    }

    .scroll.burning .burn-overlay::before {
      animation: burnSpread 2.5s forwards;
      opacity: 1;
    }

    .scroll.burning .burn-overlay::after {
      animation: smokeRise 2.5s forwards;
    }

    @keyframes emberFade {
      0% { opacity: 1; }
      30% { opacity: 0.75; }
      100% { opacity: 0; }
    }

    @keyframes burnDarken {
      0% { opacity: 0; background: rgba(0, 0, 0, 0); }
      30% { opacity: 0.35; background: radial-gradient(circle at var(--burn-x, 50%) var(--burn-y, 50%), rgba(255, 170, 60, 0.3), rgba(0, 0, 0, 0.65) 60%, rgba(0, 0, 0, 0.9) 100%); }
      100% { opacity: 1; background: radial-gradient(circle at var(--burn-x, 50%) var(--burn-y, 50%), rgba(120, 44, 12, 0.35), rgba(0, 0, 0, 0.92) 70%, rgba(0, 0, 0, 0.98) 100%); }
    }

    @keyframes burnSpread {
      0% { transform: translate(-50%, -50%) scale(0.05); opacity: 1; }
      40% { transform: translate(-50%, -50%) scale(3.5); opacity: 1; }
      70% { transform: translate(-50%, -50%) scale(6); opacity: 0.85; }
      100% { transform: translate(-50%, -50%) scale(12); opacity: 0; }
    }

    @keyframes smokeRise {
      0% { opacity: 0; }
      20% { opacity: 0.4; background-position: 50% 80%; }
      60% { opacity: 0.55; background-position: 50% 20%; }
      100% { opacity: 0; background-position: 50% -30%; }
    }

    .trick-message {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      gap: 24px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.6s ease;
      padding: 32px;
    }

    .trick-message.show {
      opacity: 1;
      visibility: visible;
    }

    .trick-message p {
      font-size: clamp(1.4rem, 2.4vw + 1rem, 2rem);
      margin: 0;
      text-shadow: 0 3px 12px rgba(0, 0, 0, 0.25);
    }

    .restart {
      padding: 12px 28px;
      font-size: 1.05rem;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #c89254, #8b5a2b);
      color: #fff;
      cursor: pointer;
      box-shadow: 0 12px 18px rgba(38, 22, 14, 0.28);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .restart:active {
      transform: scale(0.97);
      box-shadow: 0 8px 10px rgba(0, 0, 0, 0.3);
    }

    @media (max-width: 620px) {
      .scroll {
        padding: 120px 24px;
      }

      .scroll.opened {
        padding: 140px 26px 150px;
      }

      .seal {
        width: 110px;
        height: 110px;
        font-size: 32px;
      }

      .seal::after {
        width: 94px;
        height: 50px;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="scroll" id="scroll">
      <div class="scroll-edge top"></div>
      <div class="scroll-edge bottom"></div>
      <button class="seal" id="seal" aria-label="Abrir pergamino">‚ú∂</button>
      <div class="letter" id="letter" aria-hidden="true">
        <p>Hola mi reina, bueno en primer lugar, espero que te encuentres muy bien, te cuento que estoy aprendiendo mucho jejeje, hoy tuve otra sesi√≥n jejeje y pues he aprendido a comprender mucho ambas situaciones, siento que me ha ayudado, pero igual quer√≠a comentarte algo, hoy vi cierta cosilla y no quiero que pienses que no te escribo por querer que ‚Äúvos me busques‚Äù o babosadas as√≠, solo trato de respetar ese espacio y no agobiar, si por m√≠ fuera ya sabes como buscar√≠a tratarte y pues entiendo en parte cierto nivel de bloqueo emocional y el actuar de tu parte de una semana para ac√°, tienes raz√≥n y comprendo un poco m√°s con respecto a las sesiones que paso ( casualmente no quer√≠a pasar sesiones psicol√≥gicas pero bien de la nd surgieron jajaja ), la verdad es que yo ten√≠a apego ansioso y t√∫ apego evitativo üòÖ eso provoca el encierro y que te sientas mejor ‚Äúsola‚Äù pero no es tanto elecci√≥n, sino como un mecanismo de defensa que tienes y entiendo en parte, has pasado por mucho y te ha tocado madurar y resolverte por tu cuenta y desde temprana edad, no tanto por elecci√≥n, sino por tener que hacerlo, es similar a lo m√≠o, pero el detalle es que en m√≠ tiene cierto contrario por la hipersensibilidad emocional y por el extenso historial psicol√≥gico que tengo jajaja‚Ä¶. Pero ten en cuenta que siempre te tengo presente en mucho ‚ù§Ô∏è</p>
        <p>Se y entiendo por lo que estas pasando y pues se siente complicado entender y a veces sentir que es como una pared, pero estoy comenzando a calmar mi ansiedad con comprensi√≥n y pues a veces no s√© c√≥mo actuar por ello, pero trato de tomar la elecci√≥n correcta ( a veces para comprender, hasta me asesoro de chatgpt üòÇüëå y al final hago lo que quiero xd). Entiendo tu proceso en cierta parte, porque en unas ocasiones, quiz√°s ha hecho efecto los intentos de los vichos que me dicen que pasar√° lo mismo que a ellos (pr√°cticamente como que no quieren que me pase lo mismo), que simplemente est√©s conociendo a alguien o algo as√≠ y pues que puesi va, en parte es inevitable porque digo, que hoy tienes para elegir como me dijeron jejeje, que por eso no quer√≠a estar en relaci√≥n, esto y lo otro, pero no lo veo tanto as√≠ y otra parte de m√≠ me dice ‚Äúc√°llate vos loco, que importa lo que diga le gente? No quiere decir que tengan raz√≥n‚Äù y la verdad que hoy siento con m√°s fuerza que no es por ello que simplemente es por todo lo que pasas y comprendo mejor tu condici√≥n y est√° mal? No del todo, pero es algo que preocupa porque no har√° muy bien en general, cr√©eme sigo con la idea de ayudarte a curarte de ello y me gustar√≠a darte todo lo que siento jejeje pero s√© y comprendo lo que significa para ti ( es mucho y no me ajustar√° la carta jjsjsjs ) por eso no quiero agobiarte, pero si sientes que est√° mal el que actuemos as√≠ o si verdaderamente sientes que no ayuda o algo, no dudes en comunicarlo, por m√≠ mejor jajaja, pero igual, siento que dej√°ndome ayudar de quien sabe mi ansiedad se calma y aprendo mucho y he podido comprenderte mi reina ‚ù§Ô∏è</p>
        <p>Y la verdad hago ciertas pr√°cticas y veo algo y trato de replicarlo y por ello √∫ltimamente he hecho varias cartas y as√≠ siento que es una forma no invasiva de expres√°rtelo t√∫ puedes ‚ù§Ô∏è‚ú® pero no tienes porque cargar con todo sola, recuerda, a veces uno trabaja mejor solo, pero est√° bien apoyarse y expresarse, no es depender de alguien, si no, es de sabios el no sobre exigirse, reitero no estas sola y te hago esto con mucho cari√±o y amor ‚ù§Ô∏è‚ú®</p>
        <button class="close-letter" id="close" aria-label="Quemar carta">‚úï</button>
      </div>
      <div class="burn-overlay" id="burnOverlay"></div>
    </div>
  </div>

  <div class="trick-message" id="trickMessage">
    <p>üôà Era un truco que estaba probando‚Ä¶</p>
    <button class="restart" id="restart">Volver a empezar</button>
  </div>

  <script>
    const scroll = document.getElementById('scroll');
    const seal = document.getElementById('seal');
    const letter = document.getElementById('letter');
    const closeBtn = document.getElementById('close');
    const burnOverlay = document.getElementById('burnOverlay');
    const wrapper = document.querySelector('.wrapper');
    const trickMessage = document.getElementById('trickMessage');
    const restartBtn = document.getElementById('restart');

    seal.addEventListener('click', () => {
      if (scroll.classList.contains('opened')) return;
      scroll.classList.add('opened');
      letter.setAttribute('aria-hidden', 'false');
    });

    closeBtn.addEventListener('click', (event) => {
      if (scroll.classList.contains('burning')) return;
      const rect = scroll.getBoundingClientRect();
      const x = ((event.clientX - rect.left) / rect.width) * 100;
      const y = ((event.clientY - rect.top) / rect.height) * 100;
      burnOverlay.style.setProperty('--burn-x', `${x}%`);
      burnOverlay.style.setProperty('--burn-y', `${y}%`);
      scroll.classList.add('burning');
      letter.setAttribute('aria-hidden', 'true');
      setTimeout(() => {
        wrapper.style.opacity = '0';
      }, 1800);
      setTimeout(() => {
        wrapper.style.display = 'none';
        trickMessage.classList.add('show');
      }, 2500);
    });

    restartBtn.addEventListener('click', () => {
      window.location.reload();
    });
  </script>
</body>
</html>
